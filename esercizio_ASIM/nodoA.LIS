00000000  =00000004                          1  N	EQU	4
00000000  =00000004                          2  T	EQU	4
00000000  =00002004                          3  PIADA1	EQU	$2004
00000000  =00002005                          4  PIACA1	EQU	$2005
00000000  =00002008                          5  PIADA2	EQU	$2008
00000000  =00002009                          6  PIACA2	EQU	$2009
00000000                                     7  
00000000                                     8  
00008000                                     9  	ORG	$8000
00008000                                    10  MSGB	DS.B	N
00008004                                    11  MSGC	DS.B	N
00008008  00                                12  LOCK	DC.B	0
00008009  01                                13  FASE	DC.B	1
0000800A  02                                14  TURNO	DC.B	2
0000800C  0000                              15  NBYTESC	DC.W	0
0000800E  0000                              16  NBYTESB	DC.W	0
00008010  0000                              17  N_MSG	DC.W	0
00008012  00                                18  PEND_B	DC.B	0
00008013  00                                19  PEND_C	DC.B	0
00008014  00                                20  NCHARB	DC.B	0
00008015  00                                21  NCHARC	DC.B	0
00008016                                    22  
00008500                                    23  	ORG 	$8500
00008500  11FC 0000 2005                    24  MAIN	MOVE.B	#0,PIACA1
00008506  11FC 0000 2004                    25  	MOVE.B	#$00,PIADA1
0000850C  11FC 0025 2005                    26  	MOVE.B	#%00100101,PIACA1
00008512                                    27  
00008512  11FC 0000 2009                    28  	MOVE.B	#0,PIACA2
00008518  11FC 0000 2008                    29  	MOVE.B	#$00,PIADA2
0000851E  11FC 0025 2009                    30  	MOVE.B	#%00100101,PIACA2
00008524                                    31  
00008524  027C D8FF                         32  	ANDI.W	#$D8FF,SR
00008528                                    33  
00008528  4EF9 00008528                     34  LOOP	JMP	LOOP
0000852E                                    35  
0000852E                                    36  
00008600                                    37  	ORG	$8600
00008600                                    38  ISR_B
00008600  48E7 E0E0                         39  	MOVEM.L	D0-D2/A0-A2,-(A7)
00008604  4AF9 00008008                     40  	TAS	LOCK
0000860A  6700 000E                         41  	BEQ	GOT_LOCK_B
0000860E  13FC 0001 00008012                42  	MOVE.B	#1,PEND_B
00008616  6000 00B6                         43  	BRA	FINE_B
0000861A                                    44  GOT_LOCK_B	
0000861A  0C39 0001 00008009                45  	CMPI.B	#1,FASE
00008622  6600 004A                         46  	BNE	FASE2_B
00008626  0C39 0004 00008014                47  	CMPI.B	#N,NCHARB
0000862E  6700 008E                         48  	BEQ	SUSP_B
00008632                                    49  FASE1_B	
00008632  4EB9 00008800                     50  	JSR	H_B1
00008638  0C39 0001 00008013                51  	CMPI.B	#1,PEND_C
00008640  6600 0084                         52  	BNE	LEAVE_LOCK_B
00008644  0C39 0001 00008009                53  	CMPI.B	#1,FASE
0000864C  6600 0078                         54  	BNE	LEAVE_LOCK_B
00008650  0C39 0004 00008015                55  	CMPI.B	#N,NCHARC
00008658  6700 006C                         56  	BEQ	LEAVE_LOCK_B
0000865C  13FC 0000 00008013                57  	MOVE.B	#0,PEND_C
00008664  4EB9 00008900                     58  	JSR	H_C1
0000866A  6000 005A                         59  	BRA	LEAVE_LOCK_B
0000866E                                    60  FASE2_B	
0000866E  0C39 0000 0000800A                61  	CMPI.B	#0,TURNO
00008676  6700 000E                         62  	BEQ	TURNO_B
0000867A  13FC 0001 00008012                63  	MOVE.B	#1,PEND_B
00008682  6000 0010                         64  	BRA	WAKE_C
00008686                                    65  TURNO_B	
00008686  13FC 0000 00008012                66  	MOVE.B	#0,PEND_B
0000868E  4EB9 00008892                     67  	JSR	H_B2
00008694                                    68  WAKE_C	
00008694  0C39 0001 00008013                69  	CMPI.B	#1,PEND_C
0000869C  6600 0028                         70  	BNE	LEAVE_LOCK_B
000086A0  0C39 0001 0000800A                71  	CMPI.B	#1,TURNO
000086A8  6600 001C                         72  	BNE	LEAVE_LOCK_B
000086AC  13FC 0000 00008013                73  	MOVE.B	#0,PEND_C
000086B4  4EB9 0000898E                     74  	JSR	H_C2
000086BA  6000 000A                         75  	BRA	LEAVE_LOCK_B
000086BE  13FC 0001 00008012                76  SUSP_B	MOVE.B	#1,PEND_B
000086C6                                    77  LEAVE_LOCK_B	
000086C6  13FC 0000 00008008                78  	MOVE.B	#0,LOCK
000086CE                                    79  FINE_B	
000086CE  4CDF 0707                         80  	MOVEM.L	(A7)+,D0-D2/A0-A2
000086D2  4E73                              81  	RTE
000086D4                                    82  
000086D4                                    83  
00008700                                    84  	ORG	$8700
00008700                                    85  ISR_C
00008700  48E7 E0E0                         86  	MOVEM.L	D0-D2/A0-A2,-(A7)
00008704  4AF9 00008008                     87  	TAS	LOCK
0000870A  6700 000E                         88  	BEQ	G_L_C
0000870E  13FC 0001 00008013                89  	MOVE.B	#1,PEND_C
00008716  6000 00B6                         90  	BRA	FINE_C
0000871A                                    91  G_L_C	
0000871A  0C39 0001 00008009                92  	CMPI.B	#1,FASE
00008722  6600 004A                         93  	BNE	FASE2_C
00008726  0C39 0004 00008015                94  	CMPI.B	#N,NCHARC
0000872E  6700 008E                         95  	BEQ	SUSP_C
00008732                                    96  FASE1_C
00008732  4EB9 00008900                     97  	JSR	H_C1
00008738  0C39 0001 00008012                98  	CMPI.B	#1,PEND_B
00008740  6600 0084                         99  	BNE	L_L_C
00008744  0C39 0001 00008009               100  	CMPI.B	#1,FASE
0000874C  6600 0078                        101  	BNE	L_L_C
00008750  13FC 0000 00008012               102  	MOVE.B	#0,PEND_B
00008758  0C39 0004 00008014               103  	CMPI.B	#N,NCHARB
00008760  6700 0064                        104  	BEQ	L_L_C
00008764  4EB9 00008800                    105  	JSR	H_B1
0000876A  6000 005A                        106  	BRA	L_L_C
0000876E                                   107  FASE2_C	
0000876E  0C39 0001 0000800A               108  	CMPI.B	#1,TURNO
00008776  6700 000E                        109  	BEQ	TURNO_C
0000877A  13FC 0001 00008013               110  	MOVE.B	#1,PEND_C
00008782  6000 0010                        111  	BRA	WAKE_B
00008786                                   112  TURNO_C	
00008786  13FC 0000 00008013               113  	MOVE.B	#0,PEND_C
0000878E  4EB9 0000898E                    114  	JSR	H_C2
00008794                                   115  WAKE_B	
00008794  0C39 0001 00008012               116  	CMPI.B	#1,PEND_B
0000879C  6600 0028                        117  	BNE	L_L_C
000087A0  0C39 0000 0000800A               118  	CMPI.B	#0,TURNO
000087A8  6600 001C                        119  	BNE	L_L_C
000087AC  13FC 0000 00008012               120  	MOVE.B	#0,PEND_B
000087B4  4EB9 00008892                    121  	JSR	H_B2
000087BA  6000 000A                        122  	BRA	L_L_C
000087BE  13FC 0001 00008013               123  SUSP_C	MOVE.B	#1,PEND_C
000087C6                                   124  L_L_C	
000087C6  13FC 0000 00008008               125  	MOVE.B	#0,LOCK
000087CE                                   126  FINE_C	
000087CE  4CDF 0707                        127  	MOVEM.L	(A7)+,D0-D2/A0-A2
000087D2  4E73                             128  	RTE
000087D4                                   129  
00008800                                   130  	ORG	$8800
00008800                                   131  H_B1
00008800  207C 00008000                    132  	MOVEA.L	#MSGB,A0
00008806  227C 00002004                    133  	MOVEA.L	#PIADA1,A1
0000880C  1039 00008014                    134  	MOVE.B	NCHARB,D0
00008812  1191 0000                        135  	MOVE.B	(A1),(A0,D0)
00008816  5239 00008014                    136  	ADD.B		#1,NCHARB
0000881C  0C39 0004 00008014               137  	CMPI.B	#N,NCHARB
00008824  6600 006A                        138  	BNE	FHB1
00008828  5279 00008010                    139  	ADDI.W	#1,N_MSG
0000882E  0C79 0002 00008010               140  	CMPI.W	#2,N_MSG
00008836  6600 0058                        141  	BNE	FHB1
0000883A  13FC 0000 00008015               142  	MOVE.B	#0,NCHARC
00008842  13FC 0000 00008014               143  	MOVE.B	#0,NCHARB
0000884A  33FC 0000 00008010               144  	MOVE.W	#0,N_MSG
00008852  DEFC FFFE                        145  	ADDA	#-2,SP
00008856  2F3C 00008000                    146  	MOVE.L	#MSGB,-(SP)
0000885C  2F3C 00008004                    147  	MOVE.L	#MSGC,-(SP)
00008862  4EB9 00009100                    148  	JSR	CHECK
00008868  504F                             149  	ADDQ	#8,SP
0000886A  321F                             150  	MOVE	(SP)+,D1
0000886C  0C41 1111                        151  	CMPI.W	#$1111,D1
00008870  6600 000E                        152  	BNE	NOT_CHECK_B
00008874  13FC 0000 0000800A               153  	MOVE.B	#0,TURNO
0000887C  6000 000A                        154  	BRA	FINE_CHECK
00008880                                   155  NOT_CHECK_B
00008880  13FC 0001 0000800A               156  	MOVE.B	#1,TURNO
00008888                                   157  FINE_CHECK
00008888  13FC 0002 00008009               158  	MOVE.B	#2,FASE
00008890                                   159  FHB1
00008890  4E75                             160  	RTS
00008892                                   161  
00008892                                   162  H_B2
00008892  207C 00008000                    163  	MOVEA.L	#MSGB,A0
00008898  227C 00002004                    164  	MOVEA.L	#PIADA1,A1
0000889E  1039 00008014                    165  	MOVE.B	NCHARB,D0
000088A4  1191 0000                        166  	MOVE.B	(A1),(A0,D0)
000088A8  5239 00008014                    167  	ADD.B		#1,NCHARB
000088AE  0C39 0004 00008014               168  	CMPI.B	#N,NCHARB
000088B6  6600 0030                        169  	BNE	EHB2
000088BA  5279 00008010                    170  	ADD.W	#1,N_MSG
000088C0  13FC 0000 00008014               171  	MOVE.B	#0,NCHARB
000088C8  13FC 0001 0000800A               172  	MOVE.B	#1,TURNO
000088D0  0C79 0004 00008010               173  	CMPI.W	#T,N_MSG
000088D8  6600 000E                        174  	BNE	EHB2
000088DC  11FC 0000 2005                   175  	MOVE.B	#$00,PIACA1
000088E2  11FC 0000 2009                   176  	MOVE.B	#$00,PIACA2
000088E8  4E75                             177  EHB2	RTS
000088EA                                   178  
00008900                                   179  	ORG	$8900
00008900                                   180  H_C1
00008900  207C 00008004                    181  	MOVEA.L	#MSGC,A0
00008906  227C 00002008                    182  	MOVEA.L	#PIADA2,A1
0000890C  1039 00008015                    183  	MOVE.B	NCHARC,D0
00008912  1191 0000                        184  	MOVE.B	(A1),(A0,D0)
00008916  5239 00008015                    185  	ADD.B		#1,NCHARC
0000891C  0C39 0004 00008015               186  	CMPI.B	#N,NCHARC
00008924  6600 0066                        187  	BNE	FHC1
00008928  5279 00008010                    188  	ADDI.W	#1,N_MSG
0000892E  0C79 0002 00008010               189  	CMPI.W	#2,N_MSG
00008936  6600 0054                        190  	BNE	FHC1
0000893A  13FC 0000 00008015               191  	MOVE.B	#0,NCHARC
00008942  13FC 0000 00008014               192  	MOVE.B	#0,NCHARB
0000894A  33FC 0000 00008010               193  	MOVE.W	#0,N_MSG
00008952  DEFC FFFE                        194  	ADDA	#-2,SP
00008956  2F3C 00008000                    195  	MOVE.L	#MSGB,-(SP)
0000895C  2F3C 00008004                    196  	MOVE.L	#MSGC,-(SP)
00008962  4EB9 00009100                    197  	JSR	CHECK
00008968  504F                             198  	ADDQ	#8,SP
0000896A  321F                             199  	MOVE	(SP)+,D1
0000896C  0C41 1111                        200  	CMPI.W	#$1111,D1
00008970  6600 000A                        201  	BNE	NCHK_C
00008974  13FC 0000 0000800A               202  	MOVE.B	#0,TURNO
0000897C                                   203  NCHK_C
0000897C  13FC 0001 0000800A               204  	MOVE.B	#1,TURNO
00008984  13FC 0002 00008009               205  	MOVE.B	#2,FASE
0000898C                                   206  FHC1
0000898C  4E75                             207  	RTS
0000898E                                   208  
0000898E                                   209  H_C2
0000898E  207C 00008004                    210  	MOVEA.L	#MSGC,A0
00008994  227C 00002008                    211  	MOVEA.L	#PIADA2,A1
0000899A  1039 00008015                    212  	MOVE.B	NCHARC,D0
000089A0  1191 0000                        213  	MOVE.B	(A1),(A0,D0)
000089A4  5239 00008015                    214  	ADD.B		#1,NCHARC
000089AA  0C39 0004 00008015               215  	CMPI.B	#N,NCHARC
000089B2  6600 0030                        216  	BNE	EHC2
000089B6  5279 00008010                    217  	ADD.W		#1,N_MSG
000089BC  13FC 0000 00008015               218  	MOVE.B	#0,NCHARC
000089C4  13FC 0000 0000800A               219  	MOVE.B	#0,TURNO
000089CC  0C79 0004 00008010               220  	CMPI.W	#T,N_MSG
000089D4  6600 000E                        221  	BNE	EHC2
000089D8  11FC 0000 2005                   222  	MOVE.B	#$00,PIACA1
000089DE  11FC 0000 2009                   223  	MOVE.B	#$00,PIACA2
000089E4  4E75                             224  EHC2	RTS
000089E6                                   225  
00009100                                   226  	ORG	$9100
00009100                                   227  CHECK	
00009100  4E56 0000                        228  	LINK	A6,#0
00009104  206E 000C                        229  	MOVEA.L	12(A6),A0
00009108  226E 0008                        230  	MOVEA.L	8(A6),A1
0000910C  103C 0000                        231  	MOVE.B	#0,D0
00009110  143C 0003                        232  	MOVE.B	#N-1,D2
00009114                                   233  CICLO	
00009114  1230 0000                        234  	MOVE.B	(A0,D0),D1
00009118  B231 0000                        235  	CMP.B		(A1,D0),D1
0000911C  6600 0012                        236  	BNE	NOT_UGUALI
00009120  5200                             237  	ADD.B		#1,D0
00009122  51CA FFF0                        238  	DBRA		D2,CICLO
00009126  3D7C 1111 0010                   239  	MOVE.W	#$1111,16(A6)
0000912C  4E5E                             240  	UNLK	A6
0000912E  4E75                             241  	RTS
00009130                                   242  NOT_UGUALI
00009130  3D7C 0000 0010                   243  	MOVE.W	#$0000,16(A6)
00009136  4E5E                             244  	UNLK	A6
00009138  4E75                             245  	RTS
0000913A                                   246  	
0000913A                                   247  	END	MAIN

No errors detected
No warnings generated
